// Grover search on 64 qubits and 63 helper qubits

circuit: 127 qubits

// Init
H(0)
H(1)
H(2)
H(3)
H(4)
H(5)
H(6)
H(7)
H(8)
H(9)
H(10)
H(11)
H(12)
H(13)
H(14)
H(15)
H(16)
H(17)
H(18)
H(19)
H(20)
H(21)
H(22)
H(23)
H(24)
H(25)
H(26)
H(27)
H(28)
H(29)
H(30)
H(31)
H(32)
H(33)
H(34)
H(35)
H(36)
H(37)
H(38)
H(39)
H(40)
H(41)
H(42)
H(43)
H(44)
H(45)
H(46)
H(47)
H(48)
H(49)
H(50)
H(51)
H(52)
H(53)
H(54)
H(55)
H(56)
H(57)
H(58)
H(59)
H(60)
H(61)
H(62)
H(63)

// Grover iteration 1
// Z_0
NCNCNOT(0,1,64)
NCNCNOT(2,3,65)
NCNCNOT(4,5,66)
NCNCNOT(6,7,67)
NCNCNOT(8,9,68)
NCNCNOT(10,11,69)
NCNCNOT(12,13,70)
NCNCNOT(14,15,71)
NCNCNOT(16,17,72)
NCNCNOT(18,19,73)
NCNCNOT(20,21,74)
NCNCNOT(22,23,75)
NCNCNOT(24,25,76)
NCNCNOT(26,27,77)
NCNCNOT(28,29,78)
NCNCNOT(30,31,79)
NCNCNOT(32,33,80)
NCNCNOT(34,35,81)
NCNCNOT(36,37,82)
NCNCNOT(38,39,83)
NCNCNOT(40,41,84)
NCNCNOT(42,43,85)
NCNCNOT(44,45,86)
NCNCNOT(46,47,87)
NCNCNOT(48,49,88)
NCNCNOT(50,51,89)
NCNCNOT(52,53,90)
NCNCNOT(54,55,91)
NCNCNOT(56,57,92)
NCNCNOT(58,59,93)
NCNCNOT(60,61,94)
NCNCNOT(62,63,95)
CCNOT(64,65,96)
CCNOT(66,67,97)
CCNOT(68,69,98)
CCNOT(70,71,99)
CCNOT(72,73,100)
CCNOT(74,75,101)
CCNOT(76,77,102)
CCNOT(78,79,103)
CCNOT(80,81,104)
CCNOT(82,83,105)
CCNOT(84,85,106)
CCNOT(86,87,107)
CCNOT(88,89,108)
CCNOT(90,91,109)
CCNOT(92,93,110)
CCNOT(94,95,111)
CCNOT(96,97,112)
CCNOT(98,99,113)
CCNOT(100,101,114)
CCNOT(102,103,115)
CCNOT(104,105,116)
CCNOT(106,107,117)
CCNOT(108,109,118)
CCNOT(110,111,119)
CCNOT(112,113,120)
CCNOT(114,115,121)
CCNOT(116,117,122)
CCNOT(118,119,123)
CCNOT(120,121,124)
CCNOT(122,123,125)
CCNOT(124,125,126)
// The key step!
Z(126)
CCNOT(124,125,126)
CCNOT(122,123,125)
CCNOT(120,121,124)
CCNOT(118,119,123)
CCNOT(116,117,122)
CCNOT(114,115,121)
CCNOT(112,113,120)
CCNOT(110,111,119)
CCNOT(108,109,118)
CCNOT(106,107,117)
CCNOT(104,105,116)
CCNOT(102,103,115)
CCNOT(100,101,114)
CCNOT(98,99,113)
CCNOT(96,97,112)
CCNOT(94,95,111)
CCNOT(92,93,110)
CCNOT(90,91,109)
CCNOT(88,89,108)
CCNOT(86,87,107)
CCNOT(84,85,106)
CCNOT(82,83,105)
CCNOT(80,81,104)
CCNOT(78,79,103)
CCNOT(76,77,102)
CCNOT(74,75,101)
CCNOT(72,73,100)
CCNOT(70,71,99)
CCNOT(68,69,98)
CCNOT(66,67,97)
CCNOT(64,65,96)
NCNCNOT(62,63,95)
NCNCNOT(60,61,94)
NCNCNOT(58,59,93)
NCNCNOT(56,57,92)
NCNCNOT(54,55,91)
NCNCNOT(52,53,90)
NCNCNOT(50,51,89)
NCNCNOT(48,49,88)
NCNCNOT(46,47,87)
NCNCNOT(44,45,86)
NCNCNOT(42,43,85)
NCNCNOT(40,41,84)
NCNCNOT(38,39,83)
NCNCNOT(36,37,82)
NCNCNOT(34,35,81)
NCNCNOT(32,33,80)
NCNCNOT(30,31,79)
NCNCNOT(28,29,78)
NCNCNOT(26,27,77)
NCNCNOT(24,25,76)
NCNCNOT(22,23,75)
NCNCNOT(20,21,74)
NCNCNOT(18,19,73)
NCNCNOT(16,17,72)
NCNCNOT(14,15,71)
NCNCNOT(12,13,70)
NCNCNOT(10,11,69)
NCNCNOT(8,9,68)
NCNCNOT(6,7,67)
NCNCNOT(4,5,66)
NCNCNOT(2,3,65)
NCNCNOT(0,1,64)

H(0)
H(1)
H(2)
H(3)
H(4)
H(5)
H(6)
H(7)
H(8)
H(9)
H(10)
H(11)
H(12)
H(13)
H(14)
H(15)
H(16)
H(17)
H(18)
H(19)
H(20)
H(21)
H(22)
H(23)
H(24)
H(25)
H(26)
H(27)
H(28)
H(29)
H(30)
H(31)
H(32)
H(33)
H(34)
H(35)
H(36)
H(37)
H(38)
H(39)
H(40)
H(41)
H(42)
H(43)
H(44)
H(45)
H(46)
H(47)
H(48)
H(49)
H(50)
H(51)
H(52)
H(53)
H(54)
H(55)
H(56)
H(57)
H(58)
H(59)
H(60)
H(61)
H(62)
H(63)

// Z_0
NCNCNOT(0,1,64)
NCNCNOT(2,3,65)
NCNCNOT(4,5,66)
NCNCNOT(6,7,67)
NCNCNOT(8,9,68)
NCNCNOT(10,11,69)
NCNCNOT(12,13,70)
NCNCNOT(14,15,71)
NCNCNOT(16,17,72)
NCNCNOT(18,19,73)
NCNCNOT(20,21,74)
NCNCNOT(22,23,75)
NCNCNOT(24,25,76)
NCNCNOT(26,27,77)
NCNCNOT(28,29,78)
NCNCNOT(30,31,79)
NCNCNOT(32,33,80)
NCNCNOT(34,35,81)
NCNCNOT(36,37,82)
NCNCNOT(38,39,83)
NCNCNOT(40,41,84)
NCNCNOT(42,43,85)
NCNCNOT(44,45,86)
NCNCNOT(46,47,87)
NCNCNOT(48,49,88)
NCNCNOT(50,51,89)
NCNCNOT(52,53,90)
NCNCNOT(54,55,91)
NCNCNOT(56,57,92)
NCNCNOT(58,59,93)
NCNCNOT(60,61,94)
NCNCNOT(62,63,95)
CCNOT(64,65,96)
CCNOT(66,67,97)
CCNOT(68,69,98)
CCNOT(70,71,99)
CCNOT(72,73,100)
CCNOT(74,75,101)
CCNOT(76,77,102)
CCNOT(78,79,103)
CCNOT(80,81,104)
CCNOT(82,83,105)
CCNOT(84,85,106)
CCNOT(86,87,107)
CCNOT(88,89,108)
CCNOT(90,91,109)
CCNOT(92,93,110)
CCNOT(94,95,111)
CCNOT(96,97,112)
CCNOT(98,99,113)
CCNOT(100,101,114)
CCNOT(102,103,115)
CCNOT(104,105,116)
CCNOT(106,107,117)
CCNOT(108,109,118)
CCNOT(110,111,119)
CCNOT(112,113,120)
CCNOT(114,115,121)
CCNOT(116,117,122)
CCNOT(118,119,123)
CCNOT(120,121,124)
CCNOT(122,123,125)
CCNOT(124,125,126)
// The key step!
Z(126)
CCNOT(124,125,126)
CCNOT(122,123,125)
CCNOT(120,121,124)
CCNOT(118,119,123)
CCNOT(116,117,122)
CCNOT(114,115,121)
CCNOT(112,113,120)
CCNOT(110,111,119)
CCNOT(108,109,118)
CCNOT(106,107,117)
CCNOT(104,105,116)
CCNOT(102,103,115)
CCNOT(100,101,114)
CCNOT(98,99,113)
CCNOT(96,97,112)
CCNOT(94,95,111)
CCNOT(92,93,110)
CCNOT(90,91,109)
CCNOT(88,89,108)
CCNOT(86,87,107)
CCNOT(84,85,106)
CCNOT(82,83,105)
CCNOT(80,81,104)
CCNOT(78,79,103)
CCNOT(76,77,102)
CCNOT(74,75,101)
CCNOT(72,73,100)
CCNOT(70,71,99)
CCNOT(68,69,98)
CCNOT(66,67,97)
CCNOT(64,65,96)
NCNCNOT(62,63,95)
NCNCNOT(60,61,94)
NCNCNOT(58,59,93)
NCNCNOT(56,57,92)
NCNCNOT(54,55,91)
NCNCNOT(52,53,90)
NCNCNOT(50,51,89)
NCNCNOT(48,49,88)
NCNCNOT(46,47,87)
NCNCNOT(44,45,86)
NCNCNOT(42,43,85)
NCNCNOT(40,41,84)
NCNCNOT(38,39,83)
NCNCNOT(36,37,82)
NCNCNOT(34,35,81)
NCNCNOT(32,33,80)
NCNCNOT(30,31,79)
NCNCNOT(28,29,78)
NCNCNOT(26,27,77)
NCNCNOT(24,25,76)
NCNCNOT(22,23,75)
NCNCNOT(20,21,74)
NCNCNOT(18,19,73)
NCNCNOT(16,17,72)
NCNCNOT(14,15,71)
NCNCNOT(12,13,70)
NCNCNOT(10,11,69)
NCNCNOT(8,9,68)
NCNCNOT(6,7,67)
NCNCNOT(4,5,66)
NCNCNOT(2,3,65)
NCNCNOT(0,1,64)

H(0)
H(1)
H(2)
H(3)
H(4)
H(5)
H(6)
H(7)
H(8)
H(9)
H(10)
H(11)
H(12)
H(13)
H(14)
H(15)
H(16)
H(17)
H(18)
H(19)
H(20)
H(21)
H(22)
H(23)
H(24)
H(25)
H(26)
H(27)
H(28)
H(29)
H(30)
H(31)
H(32)
H(33)
H(34)
H(35)
H(36)
H(37)
H(38)
H(39)
H(40)
H(41)
H(42)
H(43)
H(44)
H(45)
H(46)
H(47)
H(48)
H(49)
H(50)
H(51)
H(52)
H(53)
H(54)
H(55)
H(56)
H(57)
H(58)
H(59)
H(60)
H(61)
H(62)
H(63)

assert state in span {
  |0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000> ,
  |000000000000000000000000000000000000000000000000000000000000000++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++>
}

measure 0..126
