// Grover search on 128 qubits and 127 helper qubits

circuit: 255 qubits

// Init
// Nothing!

// Grover iteration 1
// Z_0
NCNCNOT(0,1,128)
NCNCNOT(2,3,129)
NCNCNOT(4,5,130)
NCNCNOT(6,7,131)
NCNCNOT(8,9,132)
NCNCNOT(10,11,133)
NCNCNOT(12,13,134)
NCNCNOT(14,15,135)
NCNCNOT(16,17,136)
NCNCNOT(18,19,137)
NCNCNOT(20,21,138)
NCNCNOT(22,23,139)
NCNCNOT(24,25,140)
NCNCNOT(26,27,141)
NCNCNOT(28,29,142)
NCNCNOT(30,31,143)
NCNCNOT(32,33,144)
NCNCNOT(34,35,145)
NCNCNOT(36,37,146)
NCNCNOT(38,39,147)
NCNCNOT(40,41,148)
NCNCNOT(42,43,149)
NCNCNOT(44,45,150)
NCNCNOT(46,47,151)
NCNCNOT(48,49,152)
NCNCNOT(50,51,153)
NCNCNOT(52,53,154)
NCNCNOT(54,55,155)
NCNCNOT(56,57,156)
NCNCNOT(58,59,157)
NCNCNOT(60,61,158)
NCNCNOT(62,63,159)
NCNCNOT(64,65,160)
NCNCNOT(66,67,161)
NCNCNOT(68,69,162)
NCNCNOT(70,71,163)
NCNCNOT(72,73,164)
NCNCNOT(74,75,165)
NCNCNOT(76,77,166)
NCNCNOT(78,79,167)
NCNCNOT(80,81,168)
NCNCNOT(82,83,169)
NCNCNOT(84,85,170)
NCNCNOT(86,87,171)
NCNCNOT(88,89,172)
NCNCNOT(90,91,173)
NCNCNOT(92,93,174)
NCNCNOT(94,95,175)
NCNCNOT(96,97,176)
NCNCNOT(98,99,177)
NCNCNOT(100,101,178)
NCNCNOT(102,103,179)
NCNCNOT(104,105,180)
NCNCNOT(106,107,181)
NCNCNOT(108,109,182)
NCNCNOT(110,111,183)
NCNCNOT(112,113,184)
NCNCNOT(114,115,185)
NCNCNOT(116,117,186)
NCNCNOT(118,119,187)
NCNCNOT(120,121,188)
NCNCNOT(122,123,189)
NCNCNOT(124,125,190)
NCNCNOT(126,127,191)
CCNOT(128,129,192)
CCNOT(130,131,193)
CCNOT(132,133,194)
CCNOT(134,135,195)
CCNOT(136,137,196)
CCNOT(138,139,197)
CCNOT(140,141,198)
CCNOT(142,143,199)
CCNOT(144,145,200)
CCNOT(146,147,201)
CCNOT(148,149,202)
CCNOT(150,151,203)
CCNOT(152,153,204)
CCNOT(154,155,205)
CCNOT(156,157,206)
CCNOT(158,159,207)
CCNOT(160,161,208)
CCNOT(162,163,209)
CCNOT(164,165,210)
CCNOT(166,167,211)
CCNOT(168,169,212)
CCNOT(170,171,213)
CCNOT(172,173,214)
CCNOT(174,175,215)
CCNOT(176,177,216)
CCNOT(178,179,217)
CCNOT(180,181,218)
CCNOT(182,183,219)
CCNOT(184,185,220)
CCNOT(186,187,221)
CCNOT(188,189,222)
CCNOT(190,191,223)
CCNOT(192,193,224)
CCNOT(194,195,225)
CCNOT(196,197,226)
CCNOT(198,199,227)
CCNOT(200,201,228)
CCNOT(202,203,229)
CCNOT(204,205,230)
CCNOT(206,207,231)
CCNOT(208,209,232)
CCNOT(210,211,233)
CCNOT(212,213,234)
CCNOT(214,215,235)
CCNOT(216,217,236)
CCNOT(218,219,237)
CCNOT(220,221,238)
CCNOT(222,223,239)
CCNOT(224,225,240)
CCNOT(226,227,241)
CCNOT(228,229,242)
CCNOT(230,231,243)
CCNOT(232,233,244)
CCNOT(234,235,245)
CCNOT(236,237,246)
CCNOT(238,239,247)
CCNOT(240,241,248)
CCNOT(242,243,249)
CCNOT(244,245,250)
CCNOT(246,247,251)
CCNOT(248,249,252)
CCNOT(250,251,253)
CCNOT(252,253,254)
// The key step!
Z(254)
CCNOT(252,253,254)
CCNOT(250,251,253)
CCNOT(248,249,252)
CCNOT(246,247,251)
CCNOT(244,245,250)
CCNOT(242,243,249)
CCNOT(240,241,248)
CCNOT(238,239,247)
CCNOT(236,237,246)
CCNOT(234,235,245)
CCNOT(232,233,244)
CCNOT(230,231,243)
CCNOT(228,229,242)
CCNOT(226,227,241)
CCNOT(224,225,240)
CCNOT(222,223,239)
CCNOT(220,221,238)
CCNOT(218,219,237)
CCNOT(216,217,236)
CCNOT(214,215,235)
CCNOT(212,213,234)
CCNOT(210,211,233)
CCNOT(208,209,232)
CCNOT(206,207,231)
CCNOT(204,205,230)
CCNOT(202,203,229)
CCNOT(200,201,228)
CCNOT(198,199,227)
CCNOT(196,197,226)
CCNOT(194,195,225)
CCNOT(192,193,224)
CCNOT(190,191,223)
CCNOT(188,189,222)
CCNOT(186,187,221)
CCNOT(184,185,220)
CCNOT(182,183,219)
CCNOT(180,181,218)
CCNOT(178,179,217)
CCNOT(176,177,216)
CCNOT(174,175,215)
CCNOT(172,173,214)
CCNOT(170,171,213)
CCNOT(168,169,212)
CCNOT(166,167,211)
CCNOT(164,165,210)
CCNOT(162,163,209)
CCNOT(160,161,208)
CCNOT(158,159,207)
CCNOT(156,157,206)
CCNOT(154,155,205)
CCNOT(152,153,204)
CCNOT(150,151,203)
CCNOT(148,149,202)
CCNOT(146,147,201)
CCNOT(144,145,200)
CCNOT(142,143,199)
CCNOT(140,141,198)
CCNOT(138,139,197)
CCNOT(136,137,196)
CCNOT(134,135,195)
CCNOT(132,133,194)
CCNOT(130,131,193)
CCNOT(128,129,192)
NCNCNOT(126,127,191)
NCNCNOT(124,125,190)
NCNCNOT(122,123,189)
NCNCNOT(120,121,188)
NCNCNOT(118,119,187)
NCNCNOT(116,117,186)
NCNCNOT(114,115,185)
NCNCNOT(112,113,184)
NCNCNOT(110,111,183)
NCNCNOT(108,109,182)
NCNCNOT(106,107,181)
NCNCNOT(104,105,180)
NCNCNOT(102,103,179)
NCNCNOT(100,101,178)
NCNCNOT(98,99,177)
NCNCNOT(96,97,176)
NCNCNOT(94,95,175)
NCNCNOT(92,93,174)
NCNCNOT(90,91,173)
NCNCNOT(88,89,172)
NCNCNOT(86,87,171)
NCNCNOT(84,85,170)
NCNCNOT(82,83,169)
NCNCNOT(80,81,168)
NCNCNOT(78,79,167)
NCNCNOT(76,77,166)
NCNCNOT(74,75,165)
NCNCNOT(72,73,164)
NCNCNOT(70,71,163)
NCNCNOT(68,69,162)
NCNCNOT(66,67,161)
NCNCNOT(64,65,160)
NCNCNOT(62,63,159)
NCNCNOT(60,61,158)
NCNCNOT(58,59,157)
NCNCNOT(56,57,156)
NCNCNOT(54,55,155)
NCNCNOT(52,53,154)
NCNCNOT(50,51,153)
NCNCNOT(48,49,152)
NCNCNOT(46,47,151)
NCNCNOT(44,45,150)
NCNCNOT(42,43,149)
NCNCNOT(40,41,148)
NCNCNOT(38,39,147)
NCNCNOT(36,37,146)
NCNCNOT(34,35,145)
NCNCNOT(32,33,144)
NCNCNOT(30,31,143)
NCNCNOT(28,29,142)
NCNCNOT(26,27,141)
NCNCNOT(24,25,140)
NCNCNOT(22,23,139)
NCNCNOT(20,21,138)
NCNCNOT(18,19,137)
NCNCNOT(16,17,136)
NCNCNOT(14,15,135)
NCNCNOT(12,13,134)
NCNCNOT(10,11,133)
NCNCNOT(8,9,132)
NCNCNOT(6,7,131)
NCNCNOT(4,5,130)
NCNCNOT(2,3,129)
NCNCNOT(0,1,128)

H(0)
H(1)
H(2)
H(3)
H(4)
H(5)
H(6)
H(7)
H(8)
H(9)
H(10)
H(11)
H(12)
H(13)
H(14)
H(15)
H(16)
H(17)
H(18)
H(19)
H(20)
H(21)
H(22)
H(23)
H(24)
H(25)
H(26)
H(27)
H(28)
H(29)
H(30)
H(31)
H(32)
H(33)
H(34)
H(35)
H(36)
H(37)
H(38)
H(39)
H(40)
H(41)
H(42)
H(43)
H(44)
H(45)
H(46)
H(47)
H(48)
H(49)
H(50)
H(51)
H(52)
H(53)
H(54)
H(55)
H(56)
H(57)
H(58)
H(59)
H(60)
H(61)
H(62)
H(63)
H(64)
H(65)
H(66)
H(67)
H(68)
H(69)
H(70)
H(71)
H(72)
H(73)
H(74)
H(75)
H(76)
H(77)
H(78)
H(79)
H(80)
H(81)
H(82)
H(83)
H(84)
H(85)
H(86)
H(87)
H(88)
H(89)
H(90)
H(91)
H(92)
H(93)
H(94)
H(95)
H(96)
H(97)
H(98)
H(99)
H(100)
H(101)
H(102)
H(103)
H(104)
H(105)
H(106)
H(107)
H(108)
H(109)
H(110)
H(111)
H(112)
H(113)
H(114)
H(115)
H(116)
H(117)
H(118)
H(119)
H(120)
H(121)
H(122)
H(123)
H(124)
H(125)
H(126)
H(127)

// Z_0
NCNCNOT(0,1,128)
NCNCNOT(2,3,129)
NCNCNOT(4,5,130)
NCNCNOT(6,7,131)
NCNCNOT(8,9,132)
NCNCNOT(10,11,133)
NCNCNOT(12,13,134)
NCNCNOT(14,15,135)
NCNCNOT(16,17,136)
NCNCNOT(18,19,137)
NCNCNOT(20,21,138)
NCNCNOT(22,23,139)
NCNCNOT(24,25,140)
NCNCNOT(26,27,141)
NCNCNOT(28,29,142)
NCNCNOT(30,31,143)
NCNCNOT(32,33,144)
NCNCNOT(34,35,145)
NCNCNOT(36,37,146)
NCNCNOT(38,39,147)
NCNCNOT(40,41,148)
NCNCNOT(42,43,149)
NCNCNOT(44,45,150)
NCNCNOT(46,47,151)
NCNCNOT(48,49,152)
NCNCNOT(50,51,153)
NCNCNOT(52,53,154)
NCNCNOT(54,55,155)
NCNCNOT(56,57,156)
NCNCNOT(58,59,157)
NCNCNOT(60,61,158)
NCNCNOT(62,63,159)
NCNCNOT(64,65,160)
NCNCNOT(66,67,161)
NCNCNOT(68,69,162)
NCNCNOT(70,71,163)
NCNCNOT(72,73,164)
NCNCNOT(74,75,165)
NCNCNOT(76,77,166)
NCNCNOT(78,79,167)
NCNCNOT(80,81,168)
NCNCNOT(82,83,169)
NCNCNOT(84,85,170)
NCNCNOT(86,87,171)
NCNCNOT(88,89,172)
NCNCNOT(90,91,173)
NCNCNOT(92,93,174)
NCNCNOT(94,95,175)
NCNCNOT(96,97,176)
NCNCNOT(98,99,177)
NCNCNOT(100,101,178)
NCNCNOT(102,103,179)
NCNCNOT(104,105,180)
NCNCNOT(106,107,181)
NCNCNOT(108,109,182)
NCNCNOT(110,111,183)
NCNCNOT(112,113,184)
NCNCNOT(114,115,185)
NCNCNOT(116,117,186)
NCNCNOT(118,119,187)
NCNCNOT(120,121,188)
NCNCNOT(122,123,189)
NCNCNOT(124,125,190)
NCNCNOT(126,127,191)
CCNOT(128,129,192)
CCNOT(130,131,193)
CCNOT(132,133,194)
CCNOT(134,135,195)
CCNOT(136,137,196)
CCNOT(138,139,197)
CCNOT(140,141,198)
CCNOT(142,143,199)
CCNOT(144,145,200)
CCNOT(146,147,201)
CCNOT(148,149,202)
CCNOT(150,151,203)
CCNOT(152,153,204)
CCNOT(154,155,205)
CCNOT(156,157,206)
CCNOT(158,159,207)
CCNOT(160,161,208)
CCNOT(162,163,209)
CCNOT(164,165,210)
CCNOT(166,167,211)
CCNOT(168,169,212)
CCNOT(170,171,213)
CCNOT(172,173,214)
CCNOT(174,175,215)
CCNOT(176,177,216)
CCNOT(178,179,217)
CCNOT(180,181,218)
CCNOT(182,183,219)
CCNOT(184,185,220)
CCNOT(186,187,221)
CCNOT(188,189,222)
CCNOT(190,191,223)
CCNOT(192,193,224)
CCNOT(194,195,225)
CCNOT(196,197,226)
CCNOT(198,199,227)
CCNOT(200,201,228)
CCNOT(202,203,229)
CCNOT(204,205,230)
CCNOT(206,207,231)
CCNOT(208,209,232)
CCNOT(210,211,233)
CCNOT(212,213,234)
CCNOT(214,215,235)
CCNOT(216,217,236)
CCNOT(218,219,237)
CCNOT(220,221,238)
CCNOT(222,223,239)
CCNOT(224,225,240)
CCNOT(226,227,241)
CCNOT(228,229,242)
CCNOT(230,231,243)
CCNOT(232,233,244)
CCNOT(234,235,245)
CCNOT(236,237,246)
CCNOT(238,239,247)
CCNOT(240,241,248)
CCNOT(242,243,249)
CCNOT(244,245,250)
CCNOT(246,247,251)
CCNOT(248,249,252)
CCNOT(250,251,253)
CCNOT(252,253,254)
// The key step!
Z(254)
CCNOT(252,253,254)
CCNOT(250,251,253)
CCNOT(248,249,252)
CCNOT(246,247,251)
CCNOT(244,245,250)
CCNOT(242,243,249)
CCNOT(240,241,248)
CCNOT(238,239,247)
CCNOT(236,237,246)
CCNOT(234,235,245)
CCNOT(232,233,244)
CCNOT(230,231,243)
CCNOT(228,229,242)
CCNOT(226,227,241)
CCNOT(224,225,240)
CCNOT(222,223,239)
CCNOT(220,221,238)
CCNOT(218,219,237)
CCNOT(216,217,236)
CCNOT(214,215,235)
CCNOT(212,213,234)
CCNOT(210,211,233)
CCNOT(208,209,232)
CCNOT(206,207,231)
CCNOT(204,205,230)
CCNOT(202,203,229)
CCNOT(200,201,228)
CCNOT(198,199,227)
CCNOT(196,197,226)
CCNOT(194,195,225)
CCNOT(192,193,224)
CCNOT(190,191,223)
CCNOT(188,189,222)
CCNOT(186,187,221)
CCNOT(184,185,220)
CCNOT(182,183,219)
CCNOT(180,181,218)
CCNOT(178,179,217)
CCNOT(176,177,216)
CCNOT(174,175,215)
CCNOT(172,173,214)
CCNOT(170,171,213)
CCNOT(168,169,212)
CCNOT(166,167,211)
CCNOT(164,165,210)
CCNOT(162,163,209)
CCNOT(160,161,208)
CCNOT(158,159,207)
CCNOT(156,157,206)
CCNOT(154,155,205)
CCNOT(152,153,204)
CCNOT(150,151,203)
CCNOT(148,149,202)
CCNOT(146,147,201)
CCNOT(144,145,200)
CCNOT(142,143,199)
CCNOT(140,141,198)
CCNOT(138,139,197)
CCNOT(136,137,196)
CCNOT(134,135,195)
CCNOT(132,133,194)
CCNOT(130,131,193)
CCNOT(128,129,192)
NCNCNOT(126,127,191)
NCNCNOT(124,125,190)
NCNCNOT(122,123,189)
NCNCNOT(120,121,188)
NCNCNOT(118,119,187)
NCNCNOT(116,117,186)
NCNCNOT(114,115,185)
NCNCNOT(112,113,184)
NCNCNOT(110,111,183)
NCNCNOT(108,109,182)
NCNCNOT(106,107,181)
NCNCNOT(104,105,180)
NCNCNOT(102,103,179)
NCNCNOT(100,101,178)
NCNCNOT(98,99,177)
NCNCNOT(96,97,176)
NCNCNOT(94,95,175)
NCNCNOT(92,93,174)
NCNCNOT(90,91,173)
NCNCNOT(88,89,172)
NCNCNOT(86,87,171)
NCNCNOT(84,85,170)
NCNCNOT(82,83,169)
NCNCNOT(80,81,168)
NCNCNOT(78,79,167)
NCNCNOT(76,77,166)
NCNCNOT(74,75,165)
NCNCNOT(72,73,164)
NCNCNOT(70,71,163)
NCNCNOT(68,69,162)
NCNCNOT(66,67,161)
NCNCNOT(64,65,160)
NCNCNOT(62,63,159)
NCNCNOT(60,61,158)
NCNCNOT(58,59,157)
NCNCNOT(56,57,156)
NCNCNOT(54,55,155)
NCNCNOT(52,53,154)
NCNCNOT(50,51,153)
NCNCNOT(48,49,152)
NCNCNOT(46,47,151)
NCNCNOT(44,45,150)
NCNCNOT(42,43,149)
NCNCNOT(40,41,148)
NCNCNOT(38,39,147)
NCNCNOT(36,37,146)
NCNCNOT(34,35,145)
NCNCNOT(32,33,144)
NCNCNOT(30,31,143)
NCNCNOT(28,29,142)
NCNCNOT(26,27,141)
NCNCNOT(24,25,140)
NCNCNOT(22,23,139)
NCNCNOT(20,21,138)
NCNCNOT(18,19,137)
NCNCNOT(16,17,136)
NCNCNOT(14,15,135)
NCNCNOT(12,13,134)
NCNCNOT(10,11,133)
NCNCNOT(8,9,132)
NCNCNOT(6,7,131)
NCNCNOT(4,5,130)
NCNCNOT(2,3,129)
NCNCNOT(0,1,128)

H(0)
H(1)
H(2)
H(3)
H(4)
H(5)
H(6)
H(7)
H(8)
H(9)
H(10)
H(11)
H(12)
H(13)
H(14)
H(15)
H(16)
H(17)
H(18)
H(19)
H(20)
H(21)
H(22)
H(23)
H(24)
H(25)
H(26)
H(27)
H(28)
H(29)
H(30)
H(31)
H(32)
H(33)
H(34)
H(35)
H(36)
H(37)
H(38)
H(39)
H(40)
H(41)
H(42)
H(43)
H(44)
H(45)
H(46)
H(47)
H(48)
H(49)
H(50)
H(51)
H(52)
H(53)
H(54)
H(55)
H(56)
H(57)
H(58)
H(59)
H(60)
H(61)
H(62)
H(63)
H(64)
H(65)
H(66)
H(67)
H(68)
H(69)
H(70)
H(71)
H(72)
H(73)
H(74)
H(75)
H(76)
H(77)
H(78)
H(79)
H(80)
H(81)
H(82)
H(83)
H(84)
H(85)
H(86)
H(87)
H(88)
H(89)
H(90)
H(91)
H(92)
H(93)
H(94)
H(95)
H(96)
H(97)
H(98)
H(99)
H(100)
H(101)
H(102)
H(103)
H(104)
H(105)
H(106)
H(107)
H(108)
H(109)
H(110)
H(111)
H(112)
H(113)
H(114)
H(115)
H(116)
H(117)
H(118)
H(119)
H(120)
H(121)
H(122)
H(123)
H(124)
H(125)
H(126)
H(127)

assert state in span {
  |000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000> ,
  |0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++>
}

measure 0..254
